<html>
    <head>
        <title>Dotter</title>
        <link rel="icon" href="./assets/favicon.ico" />

        <link rel="stylesheet" href="./style.css">
        <link rel="stylesheet" href="./params.css">
        <link rel="stylesheet" href="./dialog.css">

        <link rel="stylesheet" href="../node_modules/@glidejs/glide/dist/css/glide.core.min.css">
        <link rel="stylesheet" href="../node_modules/@glidejs/glide/dist/css/glide.theme.min.css">
        <script src="../node_modules/@glidejs/glide/dist/glide.min.js"></script>
    </head>
    <body>
        <div id="tutorial_dialog" class="dialog">
            <div id="tutorial_dialog_inner" class="dialog_inner">
                <img id="close_tutorial_dialog_button" class="close_dialog_button" src="./assets/close_circle.svg" draggable="false">
                <h1>Dotter Tutorial</h1>

                <div class="glide">
                <div class="glide__track" data-glide-el="track">
                <ul class="glide__slides">

                <div id="tutorial_stage_0" class="glide__slide">
                    <h3>What is Dotter?</h3>
                    <p>
                        Dotter lets you create 3D printed embroidery designs from a reference image or sketch!
                        In the following images, we started from (1) a <b>sketch</b> and used dotter to make 
                        (2) a <b>3D model</b> which we finally (3) <b>3D printed</b> and embroidered.
                        <br><br>
                        You can make cool fiber art too!
                    </p>

                    <div class="tutorial_1_imgrow">
                        <div class="tutorial_1_imgcontainer">
                            <img class="tutorial_1_img" src="./assets/plant_in_pot_reference.jpg">
                            <p>(1) Sketch</p>
                        </div>
                        <div class="tutorial_1_imgcontainer">
                            <img class="tutorial_1_img" src="./assets/plant_in_pot_design2.jpg">
                            <p>(2) 3D design</p>
                        </div>
                        <div class="tutorial_1_imgcontainer">
                            <img class="tutorial_1_img" src="./assets/plant_in_pot_printed.jpg">
                            <p>(3) 3D printed embroidery</p>
                        </div>
                    </div>
                </div>

                <div id="tutorial_stage_1" class="glide__slide">
                    <h3>1. Upload your reference image</h3>
                    <p>
                        You need an image file (.PNG, .JPEG) to start, such as this example cactus in (1). 
                        This is your reference for making your 3D printed embroidery design. 
                        Use the sliders reposition and resize the reference until
                        you are happy with how it lines up with the hoop! Look at the video in (2) for reference.
                    </p>

                    <div class="tutorial_1_imgrow">
                        <div class="tutorial_2_imgcontainer">
                            <img class="tutorial_2_img" src="./assets/cactus_reference.jpg">
                            <p>(1) Sketch reference</p>
                        </div>
                        <div class="tutorial_2_imgcontainer">
                            <video class="tutorial_2_vid" src="./assets/how_to_adjust_image.mp4" controls></video>
                            <p>(2) How to adjust sketch reference position</p>
                        </div>
                    </div>
                </div>

                <div id="tutorial_stage_2" class="glide__slide">
                    <h3>2. Add and remove dots for embroidery</h3>
                    <p>
                        To add dots, use <B>LEFT CLICK</B> on the reference. To delete a dot, use <B>RIGHT CLICK</B>
                        on that dot. You can move dots around by dragging them (i.e. <B>LEFT CLICK + DRAG</B>). 
                        Look at the video in (1) for reference.
                        <br><br>
                        If you have many threads passing through a hole, the small dot (red) is not large enough. 
                        You can change the hole size to medium (orange) and large (green) as well. A rule of thumb is small dot
                        is good for <b>1-4</b> threads through a hole, medium dot is good for <b>5-6</b> threads through a hole, 
                        and large dot is good for anything more. 
                        Be sure that dots aren't too close to each other with the "<b>Check Dot Distances</b>" button!
                        These options are in the menu shown in (2).
                    </p>

                    <div class="tutorial_1_imgrow">
                        <div class="tutorial_2_imgcontainer">
                            <video class="tutorial_3_vid" src="./assets/how_to_add_remove_dots.mp4" controls></video>
                            <p>(1) How to add, move, and remove dots</p>
                        </div>
                        <div class="tutorial_2_imgcontainer">
                            <img class="tutorial_3_img" src="./assets/check_dots_dot_size.jpg">
                            <p>(2) Dot size menu and dot distance button</p>
                        </div>
                    </div>
                </div>

                <div id="tutorial_stage_3" class="glide__slide">
                    <h3>3. Download your design for making!</h3>
                    <p>
                        Once you are finished, you can download your design for making! If you are 3D printing your
                        design, then click the "<b>Download 3D Model</b>" button. You can choose the export file format too,
                        but the default STL works great. For reference, the design dimensions should be 105mm x 105mm.
                        <br><br>
                        If you are laser cutting, paper cutting (i.e. Cricut), or pen plotting, then click the
                        "<b>Download SVG Model</b>" button. This will give you an SVG file with millimeter units.
                        For reference, the design dimensions should be 100mm x 100mm.
                    </p>

                    <div class="tutorial_1_imgrow">
                        <div class="tutorial_2_imgcontainer">
                            <img class="tutorial_4a_img" src="./assets/download_menu.jpg">
                            <p>(1) Download menu</p>
                        </div>
                        <div class="tutorial_2_imgcontainer">
                            <img class="tutorial_4b_img" src="./assets/plant_in_pot_design2.jpg">
                            <p>(2) An example downloaded 3D design</p>
                        </div>
                        <div class="tutorial_2_imgcontainer">
                            <img class="tutorial_4b_img" src="./assets/plant_in_pot_designsvg.png">
                            <p>(3) An example downloaded SVG (2D) design</p>
                        </div>
                    </div>
                </div>

                </ul>
                </div>
                
                <div class="glide__arrows" data-glide-el="controls">
                    <button class="glide__arrow glide__arrow--left" data-glide-dir="<">prev</button>
                    <button class="glide__arrow glide__arrow--right" data-glide-dir=">">next</button>
                  </div>
                <div class="glide__bullets" data-glide-el="controls[nav]">
                    <button class="glide__bullet" data-glide-dir="=0"></button>
                    <button class="glide__bullet" data-glide-dir="=1"></button>
                    <button class="glide__bullet" data-glide-dir="=2"></button>
                    <button class="glide__bullet" data-glide-dir="=3"></button>
                </div>
                </div>
            </div>
        </div>

        <div id="login_dialog" class="dialog">
            <div id="login_dialog_inner" class="dialog_inner">
                <h1 class="login-header">Login</h1>

                <form id="login-form">
                    <div class="login-row">
                        <label for="username-input" class="login-label">Username:</label>
                        <input id="username-input" autocomplete="username" type="text">
                    </div>

                    <div class="login-row">
                        <label for="password-input" class="login-label">Password:</label>
                        <input id="password-input" autocomplete="current-password" type="password">
                    </div>

                    <button type="submit" class="login-button">Login</button>

                    <div id="login-error-message">&nbsp;</div>
                </form>
            </div>
        </div>

        <!-- <div id="fps_counter">0.00 fps</div> -->
        <div id="main_svg_container">
            <img id="help_button" src="./assets/help_button.svg" draggable="false">
            <svg id="main_svg"></svg>
        </div>
        <div id="right_column">
            <div id="meta_buttons_row">
                <button id="button_save_project">Save Project</button>
                <button id="button_load_project">Load Project</button>
                <button id="button_clear_project">Clear Project</button>
                <div id="copyright">Dotter &copy; 2024 Toysinbox 3D Printing </div>
                <input type="file" id="project_upload"/>
            </div>

            <canvas id="main_canvas"></canvas>

            <div id="params_container">
                <div id="params_container_column">
                    <h2>1. Add reference</h2>
                    <input type="file" id="image_upload" accept="image/png, image/jpeg" />
                    <div class="v_space_0_25_rem"></div>
                    <button id="button_upload_image">Upload Image</button>
                    <img id="image_preview">

                    <!-- <div class="v_space_2_rem"></div> -->

                    <div class="flex_horizontal">
                        <label class="slider_label" for="image_ds">Image Scale:</label>
                        <input class="slider_input" type="range" id="image_ds" min="0.5" max="1.5" value="1" step="0.01"/>
                    </div>
                    <div class="flex_horizontal">
                        <label class="slider_label" for="image_dx">Image X Offset:</label>
                        <input class="slider_input" type="range" id="image_dx" min="-1" max="1" value="0" step="0.01"/>
                    </div>
                    <div class="flex_horizontal">
                        <label class="slider_label" for="image_dy">Image Y Offset:</label>
                        <input class="slider_input" type="range" id="image_dy" min="-1" max="1" value="0" step="0.01"/>
                    </div>
                    <div class="flex_horizontal">
                        <label class="slider_label" for="image_do">Image Opacity:</label>
                        <input class="slider_input" type="range" id="image_do" min="0" max="1" value="0.5" step="0.01"/>
                    </div>
                </div>

                <div id="params_container_column">
                    <h2>2. Add dots</h2>
                    <button id="button_check_dot_distances" class="no_margin_top">Check Dot Distances</button>

                    <!-- <div class="v_space_1_rem"></div> -->

                    <div class="flex_horizontal">
                        <label>Dot Size:</label>
                        <form id="dot_size_form" class="horizontal_radio_buttons">
                            <label><input id="radio_dot_S" type="radio" name="dot_size" value="S" checked>Small</label>
                            <br>
                            <label><input id="radio_dot_M" type="radio" name="dot_size" value="M">Medium</label>
                            <br>
                            <label><input id="radio_dot_L" type="radio" name="dot_size" value="L">Large</label>
                        </form>
                    </div>

                    <hr class="line">

                    <!-- <div class="v_space_1_rem"></div> -->
                    <h2>3. Download design</h2>
                    <button id="button_download_svg">Download SVG</button>
                    <button id="button_download_3d">Download 3D Model</button>

                    <!-- <div class="v_space_1_rem"></div> -->

                    <div class="flex_horizontal">
                        <label>Export File Format:</label>
                        <form id="export_format_form" class="horizontal_radio_buttons">
                            <label><input type="radio" name="3d_format" value="STL" checked>STL</label>
                            <br>
                            <label><input type="radio" name="3d_format" value="OBJ">OBJ</label>
                            <br>
                            <label><input type="radio" name="3d_format" value="PLY">PLY</label>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <script src="./index.ts" type="module"></script>
    </body>
</html>